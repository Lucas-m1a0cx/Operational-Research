## è¿ç­¹å­¦ç¬¬äºŒæ¬¡ä½œä¸š

### Q1

ä»£ç å¦‚ä¸‹ï¼š

```python
import pulp

# åˆ›å»ºé—®é¢˜å˜é‡
prob = pulp.LpProblem("Maximize_Profit", pulp.LpMaximize)

# å®šä¹‰å¸¸é‡
num_machines = 5
num_fabrics = 6

a = [6, 6, 7, 8, 9, 10]
r = [[4, 3, 4, 4, 5, 6], 
     [3, 4, 5, 3, 4, 5], 
     [5, 3, 4, 5, 5, 4], 
     [3, 3, 4, 4, 6, 6], 
     [3, 3, 3, 4, 5, 7]]

# å®šä¹‰å˜é‡
x = pulp.LpVariable.dicts("x", ((i, j) for i in range(num_machines) for j in range(num_fabrics)), lowBound=1000, cat='Integer')
y = pulp.LpVariable.dicts("y", (j for j in range(num_fabrics)), lowBound=0, cat='Integer')

# ç›®æ ‡å‡½æ•°
prob += pulp.lpSum(r[i][j] * x[i, j] for i in range(num_machines) for j in range(num_fabrics)), "Total_Profit"

# çº¦æŸæ¡ä»¶
for j in range(num_fabrics):
    prob += pulp.lpSum(x[i, j] for i in range(num_machines)) == y[j], f"Fabric_Demand_{j}"

for i in range(num_machines):
    prob += pulp.lpSum(x[i, j] for j in range(num_fabrics)) <= 10000, f"Machine_Capacity_{i}"

prob += pulp.lpSum(a[j] * y[j] for j in range(num_fabrics)) <= 400000, "Total_Fund"

# æ±‚è§£é—®é¢˜
prob.solve()

# è¾“å‡ºç»“æœ
print("Status:", pulp.LpStatus[prob.status])
print("æœ€å¤§åˆ©æ¶¦:", pulp.value(prob.objective))

print("æœ€ä½³å¸ƒæ–™åˆ†é…æ–¹æ¡ˆ:")
for i in range(num_machines):
    print(f"è½¦é—´{i+1}å¸ƒæ–™åˆ†é…:", end=" ")
    for j in range(num_fabrics):
        print(f"x[{i+1}, {j+1}] = {x[i, j].varValue}", end="   ")
    print()  # æ¢è¡Œ

print("å„ç§å¸ƒæ–™æ•°é‡:")
for j in range(num_fabrics):
    print(f"y[{j+1}] = {y[j].varValue}")

```

ç»“æœå¦‚ä¸‹ï¼š

![op_1_result](C:\Users\æ™¨è½©\Pictures\op_1_result.png)

![op_1_result_2](C:\Users\æ™¨è½©\Pictures\op_1_result_2.png)

### Q2

#### æ¨¡å‹æè¿°

æˆ‘ä»¬æœ‰ä¸€ä¸ªå®¹é‡ä¸º b çš„èƒŒåŒ…ï¼Œæœ‰ n ä»¶ç‰©å“ï¼Œæ¯ä»¶ç‰©å“çš„é‡é‡ä¸º $a_j$ ï¼Œä»·å€¼ä¸º $c_j$ã€‚æˆ‘ä»¬éœ€è¦æ‰¾å‡ºä¸€ç»„ç‰©å“ï¼Œä½¿å¾—åœ¨æ€»é‡é‡ä¸è¶…è¿‡ bçš„æ¡ä»¶ä¸‹ï¼Œæ€»ä»·å€¼æœ€å¤§ã€‚

#### åŠ¨æ€è§„åˆ’æ–¹ç¨‹

å®šä¹‰çŠ¶æ€ $ğ‘‘ğ‘[ğ‘–][ğ‘¤]$ è¡¨ç¤ºå‰ i ä»¶ç‰©å“ä¸­ï¼Œæ€»é‡é‡ä¸è¶…è¿‡ ğ‘¤çš„æœ€å¤§ä»·å€¼ã€‚æˆ‘ä»¬éœ€è¦è®¡ç®—$dp[n][b]$ã€‚

çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š $ğ‘‘ğ‘[ğ‘–][ğ‘¤]=maxâ¡(ğ‘‘ğ‘[ğ‘–âˆ’1][ğ‘¤],ğ‘‘ğ‘[ğ‘–âˆ’1][ğ‘¤âˆ’ğ‘ğ‘–]+ğ‘ğ‘–)$ å…¶ä¸­ï¼š

- $ğ‘‘ğ‘[ğ‘–âˆ’1][ğ‘¤]\times dp[iâˆ’1][w] $è¡¨ç¤ºä¸é€‰ç¬¬ iä»¶ç‰©å“æ—¶çš„æœ€å¤§ä»·å€¼ã€‚
- $ğ‘‘ğ‘[ğ‘–âˆ’1][ğ‘¤âˆ’ğ‘_ğ‘–]+ğ‘_ğ‘–$è¡¨ç¤ºé€‰ç¬¬ i ä»¶ç‰©å“æ—¶çš„æœ€å¤§ä»·å€¼ã€‚

åˆå§‹æ¡ä»¶ï¼š $ğ‘‘ğ‘[0][ğ‘¤]=0$å¯¹äºæ‰€æœ‰*w*

#### èµ‹å€¼è®¾å®š

å‡è®¾æœ‰4ä»¶ç‰©å“ï¼Œé‡é‡åˆ†åˆ«ä¸º2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œä»·å€¼åˆ†åˆ«ä¸º3ï¼Œ4ï¼Œ5ï¼Œ6ã€‚èƒŒåŒ…å®¹é‡ä¸º5ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```python
def knapsack(b, weights, values):
    n = len(weights)
    # åˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„æ¥å­˜å‚¨åŠ¨æ€è§„åˆ’çš„çŠ¶æ€
    dp = [[0] * (b + 1) for _ in range(n + 1)]

    # å¡«å……dpæ•°ç»„
    for i in range(1, n + 1):
        for w in range(b + 1):
            if weights[i - 1] <= w:
                dp[i][w] = max(dp[i - 1][w], dp[i - 1][w - weights[i - 1]] + values[i - 1])
            else:
                dp[i][w] = dp[i - 1][w]

    # å›æº¯æ‰¾å‡ºå“ªäº›ç‰©å“è¢«é€‰æ‹©äº†
    w = b
    items_selected = []
    for i in range(n, 0, -1):
        if dp[i][w] != dp[i - 1][w]:
            items_selected.append(i - 1)
            w -= weights[i - 1]

    return dp[n][b], items_selected

# å®šä¹‰ç‰©å“çš„é‡é‡å’Œä»·å€¼
weights = [2, 3, 4, 5]
values = [3, 4, 5, 6]
b = 5

# è°ƒç”¨å‡½æ•°å¹¶è¾“å‡ºç»“æœ
max_value, items_selected = knapsack(b, weights, values)
print("æœ€å¤§ä»·å€¼:", max_value)
print("é€‰æ‹©çš„ç‰©å“ç´¢å¼•:", items_selected)

```

ç»“æœå¦‚ä¸‹ï¼š

![op_2_result](C:\Users\æ™¨è½©\Pictures\op_2_result.png)